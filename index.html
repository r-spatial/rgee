<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Bindings for Calling the Earth Engine API • rgee</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R Bindings for Calling the Earth Engine API">
<meta property="og:description" content="Earth Engine &lt;https://earthengine.google.com/&gt; client library for R. All of the Earth Engine API classes, modules, and functions are made available. Additional functions implemented include importing (exporting) of Earth Engine spatial objects, extraction of time series, interactive map display, assets management interface, and metadata display. See &lt;https://r-spatial.github.io/rgee/&gt; for further details.">
<meta property="og:image" content="https://r-spatial.github.io/rgee/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>

    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/rgee01.html">Introduction</a>
    </li>
    <li>
      <a href="articles/rgee02.html">Consideration</a>
    </li>
    <li>
      <a href="articles/rgee03.html">Best Practices</a>
    </li>
    <li>
      <a href="articles/rgee04.html">Shiny apps deployment</a>
    </li>
    <li>
      <a href="articles/rgee05.html">rgee and GCS sync</a>
    </li>
    <li>
      <a href="articles/rgee06.html">Integrate Rmarkdown and rgee</a>
    </li>
    <li>
      <a href="https://r-earthengine.github.io/" class="external-link">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper-o"></span>

    news
  </a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>

    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/" class="external-link">
    <span class="fa fa-github fa-lg"></span>

    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">

<div class="page-header"><h1 align="center">
<br><a href="https://github.com/r-spatial/rgee/" class="external-link"><img src="https://user-images.githubusercontent.com/16768318/118376965-5f7dca80-b5cb-11eb-9a82-47876680a3e6.png" alt="Markdownify" width="200"></a> <a href="https://github.com/r-earthengine/rgeeExtra/" class="external-link"><img src="https://user-images.githubusercontent.com/16768318/118376968-63a9e800-b5cb-11eb-83e7-3f36299e17cb.png" alt="Markdownify" width="200"></a> <a href="https://r-earthengine.com/rgeebook/" class="external-link"><img src="https://user-images.githubusercontent.com/16768318/118376966-60aef780-b5cb-11eb-8df2-ca70dcfe04c5.png" alt="Markdownify" width="200"></a> <br> rgee: Google Earth Engine for R <br>
</h1></div>
<h4 align="center">
rgee is an R binding package for calling <a href="https://developers.google.com/earth-engine/" target="_blank" class="external-link">Google Earth Engine API</a> from within R. <a href="https://r-spatial.github.io/rgee/reference/index.html" target="_blank">Various functions</a> are implemented to simplify the connection with the R spatial ecosystem.
</h4>

<p align="center">
• <a href="#installation">Installation</a>  • <a href="#hello-world">Hello World</a>  • <a href="#how-does-rgee-work">How does rgee work?</a>  • <a href="#quick-start-users-guide-for-rgee">Guides</a>  • <a href="#contributing-guide">Contributing</a>  • <a href="#share-the-love">Citation</a>  • <a href="#credits">Credits</a>
</p>
<div class="section level2">
<h2 id="what-is-google-earth-engine">What is Google Earth Engine?<a class="anchor" aria-label="anchor" href="#what-is-google-earth-engine"></a>
</h2>
<p><a href="https://earthengine.google.com/" class="external-link">Google Earth Engine</a> is a cloud-based platform that enables users to access a petabyte-scale archive of remote sensing data and conduct geospatial analysis on Google’s infrastructure. Currently, Google offers support only for Python and JavaScript. <code>rgee</code> fills that gap <strong>by providing support for R!</strong>. Below, you will find a comparison between the syntax of <code>rgee</code> and the two other client libraries supported by Google.</p>
<table class="table">
<tr>
<th>
JS (Code Editor)
</th>
<th>
Python
</th>
<th>
R
</th>
</tr>
<tr>
<td>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">var</span> db <span class="op">=</span> <span class="st">'CGIAR/SRTM90_V4'</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="kw">var</span> image <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>(db)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">print</span>(image<span class="op">.</span><span class="fu">bandNames</span>())</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>#<span class="op">&gt;</span> <span class="st">'elevation'</span></span></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> ee</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>ee.Initialize()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>db <span class="op">=</span> <span class="st">'CGIAR/SRTM90_V4'</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>image <span class="op">=</span> ee.Image(db)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>image.bandNames().getInfo()</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; [u'elevation']</span></span></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="st">'CGIAR/SRTM90_V4'</span></span>
<span><span class="va">image</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">Image</span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span>
<span><span class="va">image</span><span class="op">$</span><span class="fu">bandNames</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">getInfo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "elevation"</span></span></code></pre></div>
</td>
</tr>
</table>
<p><strong>Quite similar, isn’t it?</strong>. However, additional more minor changes should be considered when using Google Earth Engine with R. Please check the <a href="https://r-spatial.github.io/rgee/articles/rgee02.html">consideration section</a> before you start coding!</p>
</div>
<div class="section level2">
<h2 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h2>
<p><strong>NOTE: Create a <a href="https://cran.r-project.org/web/packages/startup/vignettes/startup-intro.html" class="external-link">.Renviron file</a> file to prevent setting RETICULATE_PYTHON and EARTHENGINE_GCLOUD every time you authenticate/init your account.</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set your Python ENV</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"RETICULATE_PYTHON"</span> <span class="op">=</span> <span class="st">"/usr/bin/python3"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set Google Cloud SDK. Only need it the first time you log in. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"EARTHENGINE_GCLOUD"</span> <span class="op">=</span> <span class="st">"home/csaybar/google-cloud-sdk/bin/"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_Authenticate.html">ee_Authenticate</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Init your Earth Session  </span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from CRAN with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rgee"</span><span class="op">)</span></span></code></pre></div>
<p>Install the development versions from github with</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-spatial/rgee"</span><span class="op">)</span></span></code></pre></div>
<p>Furthermore, <code>rgee</code> depends on <a href="https://pypi.org/project/numpy/" class="external-link">numpy</a> and <a href="https://pypi.org/project/earthengine-api/" class="external-link">earthengine-api</a> and it requires <strong><a href="https://cloud.google.com/sdk/docs/install#deb" class="external-link">gcloud CLI</a></strong> to authenticate new users. The following example shows how to install and set up ‘rgee’ on a new Ubuntu computer. If you intend to use rgee on a server, please refer to this example in RStudio Cloud.” – <a href="https://posit.cloud/content/5175749" class="external-link uri">https://posit.cloud/content/5175749</a>)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"remotes"</span>, <span class="st">"googledrive"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-spatial/rgee"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the username</span></span>
<span><span class="va">HOME</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"HOME"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Install miniconda</span></span>
<span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/install_miniconda.html" class="external-link">install_miniconda</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Install Google Cloud SDK</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"curl -sSL https://sdk.cloud.google.com | bash"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3 Set global parameters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"RETICULATE_PYTHON"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s/.local/share/r-miniconda/bin/python3"</span>, <span class="va">HOME</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"EARTHENGINE_GCLOUD"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s/google-cloud-sdk/bin/"</span>, <span class="va">HOME</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4 Install rgee Python dependencies</span></span>
<span><span class="fu"><a href="reference/ee_install.html">ee_install</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5. Authenticate and init your EE session</span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>There are three (3) different ways to install rgee Python dependencies:</p>
<ol style="list-style-type: decimal">
<li>Use <a href="https://r-spatial.github.io/rgee/reference/ee_install.html"><strong>ee_install</strong></a> (Highly recommended for users with no experience with Python environments)</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rgee</span><span class="fu">::</span><span class="fu"><a href="reference/ee_install.html">ee_install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Use <a href="https://r-spatial.github.io/rgee/reference/ee_install_set_pyenv.html"><strong>ee_install_set_pyenv</strong></a> (Recommended for users with experience in Python environments)</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rgee</span><span class="fu">::</span><span class="fu"><a href="reference/ee_install_set_pyenv.html">ee_install_set_pyenv</a></span><span class="op">(</span></span>
<span>  py_path <span class="op">=</span> <span class="st">"/home/csaybar/.virtualenvs/rgee/bin/python"</span>, <span class="co"># Change it for your own Python PATH</span></span>
<span>  py_env <span class="op">=</span> <span class="st">"rgee"</span> <span class="co"># Change it for your own Python ENV</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Take into account that the Python PATH you set must have earthengine-api and numpy installed. The use of <strong>miniconda/anaconda is mandatory for Windows users,</strong> Linux and MacOS users could also use virtualenv. See <a href="https://rstudio.github.io/reticulate/articles/python_packages.html" class="external-link">reticulate</a> documentation for more details.</p>
<p>If you are using MacOS or Linux, you can choose setting the Python PATH directly:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rgee</span><span class="fu">::</span><span class="fu"><a href="reference/ee_install_set_pyenv.html">ee_install_set_pyenv</a></span><span class="op">(</span></span>
<span>  py_path <span class="op">=</span> <span class="st">"/usr/bin/python3"</span>,</span>
<span>  py_env <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>However, <a href="https://r-spatial.github.io/rgee/reference/ee_install_upgrade.html"><strong>rgee::ee_install_upgrade</strong></a> and <a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link"><strong>reticulate::py_install</strong></a> will not work until you have set up a Python ENV.</p>
<ol start="3" style="list-style-type: decimal">
<li>Use the Python PATH setting support that offer <a href="https://blog.rstudio.com/2020/10/07/rstudio-v1-4-preview-python-support/" class="external-link">Rstudio v.1.4 &gt;</a>. See this <a href="https://github.com/r-spatial/rgee/tree/help/rstudio/" class="external-link">tutorial</a>.</li>
</ol>
<p>After install <code>Python dependencies</code>, you might want to use the function below for checking the rgee status.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ee_check-tools.html">ee_check</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Check non-R dependencies</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sync-rgee-with-other-python-packages">Sync rgee with other Python packages<a class="anchor" aria-label="anchor" href="#sync-rgee-with-other-python-packages"></a>
</h2>
<p>Integrate <a href="https://r-spatial.github.io/rgee/">rgee</a> with <a href="https://geemap.org/" class="external-link">geemap</a>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Initialize the Python Environment</span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Install geemap in the same Python ENV that use rgee</span></span>
<span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link">py_install</a></span><span class="op">(</span><span class="st">"geemap"</span><span class="op">)</span></span>
<span><span class="va">gm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rstudio.github.io/reticulate/reference/import.html" class="external-link">import</a></span><span class="op">(</span><span class="st">"geemap"</span><span class="op">)</span></span></code></pre></div>
<p>Upgrade the <a href="https://pypi.org/project/earthengine-api/" class="external-link">earthengine-api</a></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_install_upgrade.html">ee_install_upgrade</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-conventions">Package Conventions<a class="anchor" aria-label="anchor" href="#package-conventions"></a>
</h2>
<ul>
<li>All <code>rgee</code> functions have the prefix ee_. Auto-completion is your best ally :).</li>
<li>Full access to the Earth Engine API with the prefix <a href="https://developers.google.com/earth-engine/" class="external-link"><strong>ee$…</strong></a>.</li>
<li>Authenticate and Initialize the Earth Engine R API with <a href="https://r-spatial.github.io/rgee/reference/ee_Initialize.html"><strong>ee_Initialize</strong></a>. It is necessary once per session!.</li>
<li>
<code>rgee</code> is “pipe-friendly”; we re-export %&gt;% but do not require to use it.</li>
</ul>
</div>
<div class="section level2">
<h2 id="hello-world">Hello World<a class="anchor" aria-label="anchor" href="#hello-world"></a>
</h2>
<div class="section level3">
<h3 id="id_1-compute-the-trend-of-night-time-lights-js-version">1. Compute the trend of night-time lights (<a href="https://github.com/google/earthengine-api/" class="external-link">JS version</a>)<a class="anchor" aria-label="anchor" href="#id_1-compute-the-trend-of-night-time-lights-js-version"></a>
</h3>
<p>Authenticate and Initialize the Earth Engine R API.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Let’s create a new band containing the image date as years since 1991 by extracting the year of the image acquisition date and subtracting it from 1991.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">createTimeBand</span> <span class="op">&lt;-</span><span class="kw">function</span><span class="op">(</span><span class="va">img</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">year</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">Date</span><span class="op">(</span><span class="va">img</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">'system:time_start'</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">'year'</span><span class="op">)</span><span class="op">$</span><span class="fu">subtract</span><span class="op">(</span><span class="fl">1991L</span><span class="op">)</span> </span>
<span>  <span class="va">ee</span><span class="op">$</span><span class="fu">Image</span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">$</span><span class="fu">byte</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">addBands</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Use your TimeBand function to map it over the <a href="https://developers.google.com/earth-engine/datasets/catalog/NOAA_DMSP-OLS_NIGHTTIME_LIGHTS/" class="external-link">night-time lights collection</a>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">collection</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span></span>
<span>  <span class="fu">ImageCollection</span><span class="op">(</span><span class="st">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS'</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="st">'stable_lights'</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">map</span><span class="op">(</span><span class="va">createTimeBand</span><span class="op">)</span></span></code></pre></div>
<p>Compute a linear fit over the series of values at each pixel, so that you can visualize the y-intercept as green, and the positive/negative slopes as red/blue.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col_reduce</span> <span class="op">&lt;-</span> <span class="va">collection</span><span class="op">$</span><span class="fu">reduce</span><span class="op">(</span><span class="va">ee</span><span class="op">$</span><span class="va">Reducer</span><span class="op">$</span><span class="fu">linearFit</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">col_reduce</span> <span class="op">&lt;-</span> <span class="va">col_reduce</span><span class="op">$</span><span class="fu">addBands</span><span class="op">(</span></span>
<span>  <span class="va">col_reduce</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="st">'scale'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/ee_print.html">ee_print</a></span><span class="op">(</span><span class="va">col_reduce</span><span class="op">)</span></span></code></pre></div>
<p>Let’s visualize our map!</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Map</span><span class="op">$</span><span class="fu">setCenter</span><span class="op">(</span><span class="fl">9.08203</span>, <span class="fl">47.39835</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">Map</span><span class="op">$</span><span class="fu">addLayer</span><span class="op">(</span></span>
<span>  eeObject <span class="op">=</span> <span class="va">col_reduce</span>,</span>
<span>  visParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scale"</span>, <span class="st">"offset"</span>, <span class="st">"scale"</span><span class="op">)</span>,</span>
<span>    min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.18</span>, <span class="fl">20</span>, <span class="op">-</span><span class="fl">0.18</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"stable lights trend"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="https://user-images.githubusercontent.com/16768318/71565699-51e4a500-2aa9-11ea-83c3-9e1d32c82ba6.png" alt="rgee_01"><div class="figcaption">rgee_01</div>
</div>
</div>
<div class="section level3">
<h3 id="id_2-lets-play-with-some-precipitation-values">2. Let’s play with some precipitation values<a class="anchor" aria-label="anchor" href="#id_2-lets-play-with-some-precipitation-values"></a>
</h3>
<p>Install and load <code>tidyverse</code> and <code>sf</code> R packages, and initialize the Earth Engine R API.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Read the <code>nc</code> shapefile.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>We will use the <a href="https://developers.google.com/earth-engine/datasets/catalog/IDAHO_EPSCOR_TERRACLIMATE/" class="external-link">Terraclimate dataset</a> to extract the monthly precipitation (Pr) from 2001</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">terraclimate</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">ImageCollection</span><span class="op">(</span><span class="st">"IDAHO_EPSCOR/TERRACLIMATE"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="va">ee</span><span class="op">$</span><span class="va">ImageCollection</span><span class="op">$</span><span class="fu">filterDate</span><span class="op">(</span><span class="st">"2001-01-01"</span>, <span class="st">"2002-01-01"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="va">ee</span><span class="op">$</span><span class="va">ImageCollection</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="st">"pr"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="co"># Select only precipitation bands</span></span>
<span>  <span class="va">ee</span><span class="op">$</span><span class="va">ImageCollection</span><span class="op">$</span><span class="fu">toBands</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="co"># from imagecollection to image</span></span>
<span>  <span class="va">ee</span><span class="op">$</span><span class="va">Image</span><span class="op">$</span><span class="fu">rename</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"PP_%02d"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="co"># rename the bands of an image</span></span></code></pre></div>
<p><code>ee_extract</code> will help you to extract monthly precipitation values from the Terraclimate ImageCollection. <code>ee_extract</code> works similar to <code><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">raster::extract</a></code>, you just need to define: the ImageCollection object (x), the geometry (y), and a function to summarize the values (fun).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ee_nc_rain</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ee_extract.html">ee_extract</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">terraclimate</span>, y <span class="op">=</span> <span class="va">nc</span><span class="op">[</span><span class="st">"NAME"</span><span class="op">]</span>, sf <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Use ggplot2 to generate a beautiful static plot!</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ee_nc_rain</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="op">-</span><span class="va">NAME</span>, names_to <span class="op">=</span> <span class="st">"month"</span>, values_to <span class="op">=</span> <span class="st">"pr"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">month</span>, month<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"PP_"</span>, <span class="st">""</span>, <span class="va">month</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">month</span>, y <span class="op">=</span> <span class="va">pr</span>, group <span class="op">=</span> <span class="va">NAME</span>, color <span class="op">=</span> <span class="va">pr</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlab</span><span class="op">(</span><span class="st">"Month"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">"Precipitation (mm)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p align="center">
</p>
<p><img src="https://user-images.githubusercontent.com/16768318/81945044-2cbd8280-95c3-11ea-9ef5-fd9f6fd5fe89.png" width="80%"></p>

<p>### 3. Create an NDVI-animation (<a href="https://developers.google.com/earth-engine/tutorials/community/modis-ndvi-time-series-animation/" class="external-link">JS version</a>)</p>
<p>Install and load <code>sf</code>. after that, initialize the Earth Engine R API.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/magick/" class="external-link">magick</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Define the regional bounds of animation frames and a mask to clip the NDVI data by.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shp/arequipa.shp"</span>, package <span class="op">=</span> <span class="st">"rgee"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span>quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/sf_as_ee.html">sf_as_ee</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">region</span> <span class="op">&lt;-</span> <span class="va">mask</span><span class="op">$</span><span class="fu">geometry</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">bounds</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Retrieve the MODIS Terra Vegetation Indices 16-Day Global 1km dataset as an <code>ee.ImageCollection</code> and then, select the NDVI band.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">ImageCollection</span><span class="op">(</span><span class="st">'MODIS/006/MOD13A2'</span><span class="op">)</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="st">'NDVI'</span><span class="op">)</span></span></code></pre></div>
<p>Group images by composite date</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="va">col</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">img</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">doy</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">Date</span><span class="op">(</span><span class="va">img</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">'system:time_start'</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">getRelative</span><span class="op">(</span><span class="st">'day'</span>, <span class="st">'year'</span><span class="op">)</span></span>
<span>  <span class="va">img</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">'doy'</span>, <span class="va">doy</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">distinctDOY</span> <span class="op">&lt;-</span> <span class="va">col</span><span class="op">$</span><span class="fu">filterDate</span><span class="op">(</span><span class="st">'2013-01-01'</span>, <span class="st">'2014-01-01'</span><span class="op">)</span></span></code></pre></div>
<p>Now, let’s define a filter that identifies which images from the complete collection match the DOY from the distinct DOY collection.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="va">Filter</span><span class="op">$</span><span class="fu">equals</span><span class="op">(</span>leftField <span class="op">=</span> <span class="st">'doy'</span>, rightField <span class="op">=</span> <span class="st">'doy'</span><span class="op">)</span></span></code></pre></div>
<p>Define a join and convert the resulting FeatureCollection to an ImageCollection… it will take you only 2 lines of code!</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">join</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="va">Join</span><span class="op">$</span><span class="fu">saveAll</span><span class="op">(</span><span class="st">'doy_matches'</span><span class="op">)</span></span>
<span><span class="va">joinCol</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">ImageCollection</span><span class="op">(</span><span class="va">join</span><span class="op">$</span><span class="fu">apply</span><span class="op">(</span><span class="va">distinctDOY</span>, <span class="va">col</span>, <span class="va">filter</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Apply median reduction among the matching DOY collections.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="va">joinCol</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">img</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">doyCol</span> <span class="op">=</span> <span class="va">ee</span><span class="op">$</span><span class="va">ImageCollection</span><span class="op">$</span><span class="fu">fromImages</span><span class="op">(</span></span>
<span>    <span class="va">img</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">'doy_matches'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">doyCol</span><span class="op">$</span><span class="fu">reduce</span><span class="op">(</span><span class="va">ee</span><span class="op">$</span><span class="va">Reducer</span><span class="op">$</span><span class="fu">median</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Almost ready! but let’s define RGB visualization parameters first.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">visParams</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  min <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">9000.0</span>,</span>
<span>  bands <span class="op">=</span> <span class="st">"NDVI_median"</span>,</span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">'FFFFFF'</span>, <span class="st">'CE7E45'</span>, <span class="st">'DF923D'</span>, <span class="st">'F1B555'</span>, <span class="st">'FCD163'</span>, <span class="st">'99B718'</span>, <span class="st">'74A901'</span>,</span>
<span>    <span class="st">'66A000'</span>, <span class="st">'529400'</span>, <span class="st">'3E8601'</span>, <span class="st">'207401'</span>, <span class="st">'056201'</span>, <span class="st">'004C00'</span>, <span class="st">'023B01'</span>,</span>
<span>    <span class="st">'012E01'</span>, <span class="st">'011D01'</span>, <span class="st">'011301'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Create RGB visualization images for use as animation frames.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rgbVis</span> <span class="op">&lt;-</span> <span class="va">comp</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">img</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">img</span><span class="op">$</span><span class="va">visualize</span>, <span class="va">visParams</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">ee</span><span class="op">$</span><span class="va">Image</span><span class="op">$</span><span class="fu">clip</span><span class="op">(</span><span class="va">mask</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Let’s animate this. Define GIF visualization parameters.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gifParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  region <span class="op">=</span> <span class="va">region</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="fl">600</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">'EPSG:3857'</span>,</span>
<span>  framesPerSecond <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Get month names</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_modis_mabbr</span> <span class="op">&lt;-</span> <span class="va">distinctDOY</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="va">ee_get_date_ic</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="co"># Get Image Collection dates</span></span>
<span>  <span class="st">'[['</span><span class="op">(</span><span class="st">"time_start"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="co"># Select time_start column</span></span>
<span>  <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">month</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="co"># Get the month component of the datetime</span></span>
<span>  <span class="st">'['</span><span class="op">(</span><span class="va">month.abb</span>, <span class="va">.</span><span class="op">)</span> <span class="co"># subset around month abbreviations</span></span></code></pre></div>
<p>And finally, use ee_utils_gif_* functions to render the GIF animation and add some texts.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">animation</span> <span class="op">&lt;-</span> <span class="fu">ee_utils_gif_creator</span><span class="op">(</span><span class="va">rgbVis</span>, <span class="va">gifParams</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span>
<span><span class="va">animation</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ee_utils_gif_annotate</span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="st">"NDVI: MODIS/006/MOD13A2"</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">15</span>, color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    location <span class="op">=</span> <span class="st">"+10+10"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ee_utils_gif_annotate</span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="va">dates_modis_mabbr</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    location <span class="op">=</span> <span class="st">"+290+350"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    font <span class="op">=</span> <span class="st">"arial"</span>,</span>
<span>    boxcolor <span class="op">=</span> <span class="st">"#000000"</span></span>
<span>  <span class="op">)</span> <span class="co"># -&gt; animation_wtxt</span></span>
<span></span>
<span><span class="co"># ee_utils_gif_save(animation_wtxt, path = "raster_as_ee.gif")</span></span></code></pre></div>
<p align="center">
</p>
<p><img src="https://user-images.githubusercontent.com/16768318/77121867-203e0300-6a34-11ea-97ba-6bed74ef4300.gif"></p>

<p>## How does rgee work?</p>
<p><code>rgee</code> is <strong>not</strong> a native Earth Engine API like the Javascript or Python client. Developing an Earth Engine API from scratch would create too much maintenance burden, especially considering that the API is in <a href="https://github.com/google/earthengine-api" class="external-link">active development</a>. So, how is it possible to run Earth Engine using R? the answer is [reticulate]! (<a href="https://rstudio.github.io/reticulate/" class="external-link uri">https://rstudio.github.io/reticulate/</a>). <code>reticulate</code> is an R package designed to allow seamless interoperability between R and Python. When an Earth Engine <strong>request</strong> is created in R, <code>reticulate</code> will translate this request into Python and pass it to the <code>Earth Engine Python API</code>, which converts the request to a <code>JSON</code> format. Finally, the request is received by the GEE Platform through a Web REST API. The <strong>response</strong> will follow the same path in reverse.</p>
<div class="float">
<img src="https://user-images.githubusercontent.com/16768318/71569603-3341d680-2ac8-11ea-8787-4dd1fbba326f.png" alt="workflow"><div class="figcaption">workflow</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the <code>rgee</code> project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="contributing-guide">Contributing Guide<a class="anchor" aria-label="anchor" href="#contributing-guide"></a>
</h2>
<p>👍 Thanks for taking the time to contribute! 🎉👍 Please review our <a href="CONTRIBUTING.html">Contributing Guide</a>.</p>
</div>
<div class="section level2">
<h2 id="share-the-love">Share the love<a class="anchor" aria-label="anchor" href="#share-the-love"></a>
</h2>
<p>Enjoying <strong>rgee</strong>? Let others know about it! Share it on Twitter, LinkedIN or in a blog post to spread the word.</p>
<p>Using <strong>rgee</strong> for your scientific article? here’s how you can cite it</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">"rgee"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>To cite rgee <span class="cf">in</span> publications use<span class="sc">:</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  C Aybar, Q Wu, L Bautista, R Yali and A <span class="fu">Barja</span> (<span class="dv">2020</span>) rgee<span class="sc">:</span> An R</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  package <span class="cf">for</span> interacting with Google Earth Engine Journal of Open</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>  Source Software URL https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>r<span class="sc">-</span>spatial<span class="sc">/</span>rgee<span class="sc">/</span>.</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a>A BibTeX entry <span class="cf">for</span> LaTeX users is</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="sc">@</span>Article{,</span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a>  title <span class="ot">=</span> {rgee<span class="sc">:</span> An R package <span class="cf">for</span> interacting with Google Earth Engine},</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a>  author <span class="ot">=</span> {Cesar Aybar and Quisheng Wu and Lesly Bautista and Roy Yali and Antony Barja},</span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a>  journal <span class="ot">=</span> {Journal of Open Source Software},</span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a>  year <span class="ot">=</span> {<span class="dv">2020</span>},</span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="credits">Credits<a class="anchor" aria-label="anchor" href="#credits"></a>
</h2>
<p>We want to offer a <strong>special thanks</strong> <span class="emoji" data-emoji="raised_hands">🙌</span> <span class="emoji" data-emoji="clap">👏</span> to <a href="https://github.com/jdbcode" class="external-link"><strong>Justin Braaten</strong></a> for his wise and helpful comments in the whole development of <strong>rgee</strong>. As well, we would like to mention the following third-party R/Python packages for contributing indirectly to the improvement of rgee:</p>
<ul>
<li><a href="https://github.com/tracek/gee_asset_manager/" class="external-link"><strong>gee_asset_manager - Lukasz Tracewski</strong></a></li>
<li><a href="https://github.com/samapriya/geeup/" class="external-link"><strong>geeup - Samapriya Roy</strong></a></li>
<li><a href="https://github.com/samapriya/gee_asset_manager_addon/" class="external-link"><strong>geeadd - Samapriya Roy</strong></a></li>
<li><a href="https://github.com/KMarkert/cartoee/" class="external-link"><strong>cartoee - Kel Markert</strong></a></li>
<li><a href="https://github.com/gee-community/gee_tools/" class="external-link"><strong>geetools - Rodrigo E. Principe</strong></a></li>
<li><a href="https://github.com/loicdtx/landsat-extract-gee/" class="external-link"><strong>landsat-extract-gee - Loïc Dutrieux</strong></a></li>
<li><a href="https://github.com/JesJehle/earthEngineGrabR/" class="external-link"><strong>earthEngineGrabR - JesJehle</strong></a></li>
<li><a href="https://github.com/r-spatial/sf/" class="external-link"><strong>sf - Edzer Pebesma</strong></a></li>
<li><a href="https://github.com/r-spatial/stars/" class="external-link"><strong>stars - Edzer Pebesma</strong></a></li>
<li><a href="https://github.com/appelmar/gdalcubes/" class="external-link"><strong>gdalcubes - Marius Appel</strong></a></li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rgee" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-spatial/rgee/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-spatial/rgee/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2.0)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rgee</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Cesar Aybar <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2745-9535" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://colab.research.google.com/github/r-spatial/rgee/blob/examples/rgee_colab.ipynb" class="external-link"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open in Colab" title="Open and Execute in Google Colaboratory"></a></li>
<li><a href="https://github.com/r-spatial/rgee/actions" class="external-link"><img src="https://github.com/r-spatial/rgee/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable
state and is being actively
developed."></a></li>
<li><a href="https://codecov.io/gh/r-spatial/rgee" class="external-link"><img src="https://codecov.io/gh/r-spatial/rgee/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://opensource.org/licenses/Apache-2.0" class="external-link"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://joss.theoj.org/papers/aea42ddddd79df480a858bc1e51857fc" class="external-link"><img src="https://joss.theoj.org/papers/aea42ddddd79df480a858bc1e51857fc/status.svg" alt="status"></a></li>
<li><a href="https://cran.r-project.org/package=rgee" class="external-link"><img src="https://www.r-pkg.org/badges/version/rgee" alt="CRAN
status"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.3945409" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3945409.svg" alt="DOI"></a></li>
<li><a href="https://cran.r-project.org/web/packages/rgee/index.html" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/rgee" alt="CRAN status"></a></li>
<li><a href="https://www.buymeacoffee.com/csay" target="_blank" class="external-link"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
