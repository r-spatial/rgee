<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert an sf object to an EE object — sf_as_ee • rgee</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert an sf object to an EE object — sf_as_ee" />
<meta property="og:description" content="Convert an sf object to an EE object" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/considerations.html">Considerations</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently_Asked_Questions</a>
    </li>
    <li>
      <a href="../articles/setup.html">Setup_and_Details</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/rgee/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert an sf object to an EE object</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-spatial/rgee/blob/master/R/sf_as_ee.R'><code>R/sf_as_ee.R</code></a></small>
    <div class="hidden name"><code>sf_as_ee.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convert an sf object to an EE object</p>
    </div>

    <pre class="usage"><span class='fu'>sf_as_ee</span>(
  <span class='no'>x</span>,
  <span class='kw'>via</span> <span class='kw'>=</span> <span class='st'>"getInfo"</span>,
  <span class='kw'>assetId</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>bucket</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>monitoring</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>check_ring_dir</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>evenOdd</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>proj</span> <span class='kw'>=</span> <span class='fl'>4326</span>,
  <span class='kw'>geodesic</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>sf object to be converted into a EE object.</p></td>
    </tr>
    <tr>
      <th>via</th>
      <td><p>Method to download the image. Three methods are implemented
'getInfo', 'getInfo_to_asset' and 'gcs_to_asset'. See details.</p></td>
    </tr>
    <tr>
      <th>assetId</th>
      <td><p>Character. Destination asset ID for the uploaded file. Ignore
if <code>via</code> argument is "getInfo".</p></td>
    </tr>
    <tr>
      <th>bucket</th>
      <td><p>Character. Name of the bucket (GCS) to save intermediate files
(ignore if <code>via</code> is not defined as "gcs_to_asset").</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>A boolean argument which indicates indicating
whether "filename" should be overwritten. By default TRUE.</p></td>
    </tr>
    <tr>
      <th>monitoring</th>
      <td><p>Logical. Ignore if via is not set as
<code>getInfo_to_asset</code> or <code>gcs_to_asset</code>. If TRUE the exportation task
will be monitored.</p></td>
    </tr>
    <tr>
      <th>check_ring_dir</th>
      <td><p>Logical. See <a href='https://rdrr.io/pkg/sf/man/st_read.html'>st_read</a> for details.</p></td>
    </tr>
    <tr>
      <th>evenOdd</th>
      <td><p>Logical. Ignored if <code>x</code> is not a Polygon. If TRUE,
polygon interiors will be determined by the even/odd rule, where a point
is inside if it crosses an odd number of edges to reach a point at infinity.
Otherwise polygons use the left-inside rule, where interiors are on the
left side of the shell's edges when walking the vertices in the given order.
If unspecified, defaults to TRUE.</p></td>
    </tr>
    <tr>
      <th>proj</th>
      <td><p>Integer or character. coordinate reference system for the EE
object, defaults to "EPSG:4326" (x=longitude, y=latitude).</p></td>
    </tr>
    <tr>
      <th>geodesic</th>
      <td><p>Logical. Ignored if <code>x</code> is not a Polygon or LineString.
Whether line segments should be interpreted as spherical geodesics. If
FALSE, indicates that line segments should be interpreted as planar lines
in the specified CRS. If absent, defaults to TRUE if the CRS is geographic
(including the default EPSG:4326), or to FALSE if the CRS is projected.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress info message.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p><a href='https://rdrr.io/pkg/sf/man/st_read.html'>st_read</a> arguments might be included.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ee$FeatureCollection object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>sf_as_ee</code> supports the upload of <code>sf</code> objects by three different
options: "getInfo", "getInfo_to_asset", and "gcs_to_asset".
When "getInfo" is set in the <code>via</code> argument the sf object is
transformed to GeoJSON using <a href='https://docs.ropensci.org/geojsonio/reference/geojson_json.html'>geojson_json</a> and then
encrusted in an HTTP request using the server-side objects that are
implemented in the Earth Engine API (ee$Geometry). If the sf object is too
large (~ &gt;1Mb) it is likely to cause bottlenecks since it is a temporary
file that is not saved in your Earth Engine Asset. See
<a href='https://developers.google.com/earth-engine/client_server'>Client
vs Server</a> documentation for more details. The second method implemented is
'getInfo_to_asset'. It is similar to the previous one, with the difference
that the result will be saved in your Earth Engine Asset. For dealing
with very large spatial objects, it is preferable to use the third option
'gcs_to_asset'. This option firstly save the sf object as a  *.shp file
in the /temp directory . Secondly, using the function <code>local_to_gcs</code>
will move the shapefile from local to Google Cloud Storage. Finally, using
the function <code>gcs_to_ee_table</code> the ESRI shapefile will be loaded
to the Earth Engine Asset.
See <a href='https://developers.google.com/earth-engine/importing'>Importing
table data</a> documentation for more details.</p>
<p>Earth Engine is strict on polygon ring directions (outer ring
counter-clockwise, and the inner one clockwise). If <code>check_ring_dir</code> is TRUE,
it check every ring, and revert them if necessary, to counter clockwise for
outer, and clockwise for inner (hole) ones. By default this is FALSE because
it is an expensive operation.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>rgee</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>sf</span>)

<span class='fu'><a href='ee_reattach.html'>ee_reattach</a></span>() <span class='co'># reattach ee as a reserved word</span>
<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span>()

<span class='co'># 1. Handling geometry parameters</span>
<span class='co'># Simple</span>
<span class='no'>ee_x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/sf/man/st_read.html'>st_read</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"shape/nc.shp"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"sf"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'>sf_as_ee</span>()

<span class='no'>Map</span>$<span class='fu'>centerObject</span>(<span class='kw'>eeObject</span> <span class='kw'>=</span> <span class='no'>ee_x</span>)
<span class='no'>Map</span>$<span class='fu'>addLayer</span>(<span class='no'>ee_x</span>)

<span class='co'># Create a right-inside polygon.</span>
<span class='no'>toy_poly</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>35</span>,-<span class='fl'>10</span>,-<span class='fl'>35</span>,<span class='fl'>10</span>,<span class='fl'>35</span>,<span class='fl'>10</span>,<span class='fl'>35</span>,-<span class='fl'>10</span>,-<span class='fl'>35</span>,-<span class='fl'>10</span>),
                   <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>,
                   <span class='kw'>byrow</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/sf/man/st.html'>st_polygon</a></span>()
<span class='no'>holePoly</span> <span class='kw'>&lt;-</span> <span class='fu'>sf_as_ee</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>toy_poly</span>, <span class='kw'>evenOdd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># Create an even-odd version of the polygon.</span>
<span class='no'>evenOddPoly</span> <span class='kw'>&lt;-</span> <span class='fu'>sf_as_ee</span>(<span class='no'>toy_poly</span>, <span class='kw'>evenOdd</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Create a point to test the insideness of the polygon.</span>
<span class='no'>pt</span> <span class='kw'>&lt;-</span> <span class='no'>ee</span>$<span class='no'>Geometry</span>$<span class='fu'>Point</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1.5</span>, <span class='fl'>1.5</span>))

<span class='co'># Check insideness with a contains operator.</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>holePoly</span>$<span class='fu'>geometry</span>()$<span class='fu'>contains</span>(<span class='no'>pt</span>)$<span class='fu'>getInfo</span>() <span class='kw'>%&gt;%</span> <span class='fu'><a href='ee_utils_py_to_r.html'>ee_utils_py_to_r</a></span>())
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>evenOddPoly</span>$<span class='fu'>geometry</span>()$<span class='fu'>contains</span>(<span class='no'>pt</span>)$<span class='fu'>getInfo</span>() <span class='kw'>%&gt;%</span> <span class='fu'><a href='ee_utils_py_to_r.html'>ee_utils_py_to_r</a></span>())

<span class='co'># 2. Upload small geometries to EE asset</span>
<span class='no'>assetId</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span>(<span class='st'>"%s/%s"</span>, <span class='fu'><a href='ee_get_assethome.html'>ee_get_assethome</a></span>(), <span class='st'>'toy_poly'</span>)
<span class='no'>eex</span> <span class='kw'>&lt;-</span> <span class='fu'>sf_as_ee</span>(
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>toy_poly</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>assetId</span> <span class='kw'>=</span> <span class='no'>assetId</span>,
  <span class='kw'>via</span> <span class='kw'>=</span> <span class='st'>'getInfo_to_asset'</span>)

<span class='co'># 3. Upload large geometries to EE asset</span>
<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span>(<span class='kw'>gcs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>assetId</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sprintf.html'>sprintf</a></span>(<span class='st'>"%s/%s"</span>, <span class='fu'><a href='ee_get_assethome.html'>ee_get_assethome</a></span>(), <span class='st'>'toy_poly_gcs'</span>)
<span class='no'>eex</span> <span class='kw'>&lt;-</span> <span class='fu'>sf_as_ee</span>(
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>toy_poly</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>assetId</span> <span class='kw'>=</span> <span class='no'>assetId</span>,
  <span class='kw'>bucket</span> <span class='kw'>=</span> <span class='st'>'rgee_dev'</span>,
  <span class='kw'>monitoring</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>via</span> <span class='kw'>=</span> <span class='st'>'gcs_to_asset'</span>
)
}</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


