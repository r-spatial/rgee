<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a GIF from an Earth Engine ImageCollection — ee_utils_gif_creator • rgee</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a GIF from an Earth Engine ImageCollection — ee_utils_gif_creator" />
<meta property="og:description" content="Create an GIF (as a magick-image object) from a EE
ImageCollection. Note: Animations can only be created when ImageCollections
is composed by RGB or RGBA image. This can be done by mapping
a visualization function onto an ImageCollection (e.g. ic$map(function(img) img$visualize(...)))
or specifying three bands in parameters argument (See examples). ee_utils_gif_creator is a
wrapper around ee$ImageCollection$getVideoThumbURL." />
<meta property="og:image" content="http://r-spatial.github.io/rgee/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/setup.html">Setup and details</a>
    </li>
    <li>
      <a href="../articles/considerations.html">Consideration</a>
    </li>
    <li>
      <a href="../articles/BestPractices.html">Best Practices</a>
    </li>
    <li>
      <a href="http://csaybar.github.io/rgee-examples/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a GIF from an Earth Engine ImageCollection</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-spatial/rgee/blob/master/R/ee_utils.R'><code>R/ee_utils.R</code></a></small>
    <div class="hidden name"><code>ee_utils_gif_creator.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create an GIF (as a magick-image object) from a EE
ImageCollection. Note: Animations can only be created when ImageCollections
is composed by RGB or RGBA image. This can be done by mapping
a visualization function onto an ImageCollection (e.g. <code>ic$map(function(img) img$visualize(...))</code>)
or specifying three bands in parameters argument (See examples). ee_utils_gif_creator is a
wrapper around <strong><code>ee$ImageCollection$getVideoThumbURL</code></strong>.</p>
    </div>

    <pre class="usage"><span class='fu'>ee_utils_gif_creator</span>(<span class='kw'>ic</span>, <span class='kw'>parameters</span>, quiet = <span class='fl'>FALSE</span>, <span class='kw'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ic</th>
      <td><p>An ee$ImageCollection.</p></td>
    </tr>
    <tr>
      <th>parameters</th>
      <td><p>List of parameters for visualization and animation. See details.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress info message.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>parameter(s) passed on to <a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A magick-image object of the specified ImageCollection.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The parameters argument is identical to visParams (See <code>rgee::Map$addLayer</code>),
plus, optionally:</p><ul>
<li><p><strong>dimensions</strong>: A number or pair of numbers in format c(WIDTH,HEIGHT).
Max dimensions of the thumbnail to render, in pixels. If only one number is
passed, it is used as the maximum, and the other dimension is computed by
proportional scaling.</p></li>
<li><p><strong>crs</strong>: A CRS string specifying the projection of the output.</p></li>
<li><p><strong>crs_transform</strong>: The affine transform to use for the output
pixel grid.</p></li>
<li><p><strong>scale</strong>: A scale to determine the output pixel grid; ignored if
both crs and crs_transform are specified.</p></li>
<li><p><strong>region</strong>: ee$Geometry$Polygon, GeoJSON or c(E,S,W,N). Geospatial
region of the result. By default, the whole image.</p></li>
<li><p><strong>format</strong>: String. The output format (only 'gif' is currently
supported).</p></li>
<li><p><strong>framesPerSecond</strong>: String. Animation speed.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other GIF functions: 
<code><a href='ee_utils_gif_annotate.html'>ee_utils_gif_annotate</a>()</code>,
<code><a href='ee_utils_gif_save.html'>ee_utils_gif_save</a>()</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Jeroen Ooms</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='kw'><a href='https://github.com/r-spatial/rgee'>rgee</a></span>)

<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span>()

<span class='kw'>col</span> <span class='op'>&lt;-</span> <span class='kw'>ee</span><span class='op'>$</span><span class='fu'>ImageCollection</span>(<span class='st'>"JRC/GSW1_1/YearlyHistory"</span>)<span class='op'>$</span><span class='fu'>map</span>(<span class='fu'>function</span>(<span class='kw'>img</span>) {
  <span class='kw'>year</span> <span class='op'>&lt;-</span> <span class='kw'>img</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/date.html'>date</a></span>()<span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/get.html'>get</a></span>(<span class='st'>"year"</span>)
  <span class='kw'>yearImg</span> <span class='op'>&lt;-</span> <span class='kw'>img</span><span class='op'>$</span><span class='fu'>gte</span>(<span class='fl'>2</span>)<span class='op'>$</span><span class='fu'>multiply</span>(<span class='kw'>year</span>)
  <span class='kw'>despeckle</span> <span class='op'>&lt;-</span> <span class='kw'>yearImg</span><span class='op'>$</span><span class='fu'>connectedPixelCount</span>(<span class='fl'>15</span>, <span class='fl'>TRUE</span>)<span class='op'>$</span><span class='fu'>eq</span>(<span class='fl'>15</span>)
  <span class='kw'>yearImg</span><span class='op'>$</span><span class='fu'>updateMask</span>(<span class='kw'>despeckle</span>)<span class='op'>$</span><span class='fu'>selfMask</span>()<span class='op'>$</span><span class='fu'>set</span>(<span class='st'>"year"</span>, <span class='kw'>year</span>)
})

<span class='kw'>appendReverse</span> <span class='op'>&lt;-</span> <span class='fu'>function</span>(<span class='kw'>col</span>) <span class='kw'>col</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/merge.html'>merge</a></span>(<span class='kw'>col</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span>(<span class='st'>'year'</span>, <span class='fl'>FALSE</span>))

<span class='co'># -----------------------------------</span>
<span class='co'># 1 Basic Animation - Ucayali Peru</span>
<span class='co'># -----------------------------------</span>

<span class='kw'>bgColor</span> <span class='op'>=</span> <span class='st'>"FFFFFF"</span> <span class='co'># Assign white to background pixels.</span>
<span class='kw'>riverColor</span> <span class='op'>=</span> <span class='st'>"0D0887"</span> <span class='co'># Assign blue to river pixels.</span>

<span class='co'>## 1.1 Create the dataset</span>
<span class='kw'>annualCol</span> <span class='op'>=</span> <span class='kw'>col</span><span class='op'>$</span><span class='fu'>map</span>(<span class='fu'>function</span>(<span class='kw'>img</span>) {
  <span class='kw'>img</span><span class='op'>$</span><span class='fu'>unmask</span>(<span class='fl'>0</span>)<span class='op'>$</span>
    <span class='fu'>visualize</span>(min = <span class='fl'>0</span>, max = <span class='fl'>1</span>, palette = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>bgColor</span>, <span class='kw'>riverColor</span>))<span class='op'>$</span>
    <span class='fu'>set</span>(<span class='st'>"year"</span>, <span class='kw'>img</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/get.html'>get</a></span>(<span class='st'>"year"</span>))
})
<span class='kw'>basicAnimation</span> <span class='op'>&lt;-</span> <span class='fu'>appendReverse</span>(<span class='kw'>annualCol</span>)


<span class='co'>## 1.2 Set video arguments</span>
<span class='kw'>aoi</span> <span class='op'>&lt;-</span> <span class='kw'>ee</span><span class='op'>$</span><span class='kw'>Geometry</span><span class='op'>$</span><span class='fu'>Rectangle</span>(<span class='op'>-</span><span class='fl'>74.327</span>, <span class='op'>-</span><span class='fl'>10.087</span>, <span class='op'>-</span><span class='fl'>73.931</span>, <span class='op'>-</span><span class='fl'>9.327</span>)
<span class='kw'>videoArgs</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  dimensions = <span class='fl'>600</span>, <span class='co'># Max dimension (pixels), min dimension is proportionally scaled.</span>
  region = <span class='kw'>aoi</span>,
  framesPerSecond = <span class='fl'>10</span>
)

<span class='co'>## 1.2 Download, display and save the GIF!</span>
<span class='kw'>animation</span> <span class='op'>&lt;-</span> <span class='fu'>ee_utils_gif_creator</span>(<span class='kw'>basicAnimation</span>, <span class='kw'>videoArgs</span>, mode = <span class='st'>"wb"</span>)
<span class='kw'>get_years</span> <span class='op'>&lt;-</span> <span class='kw'>basicAnimation</span><span class='op'>$</span><span class='fu'>aggregate_array</span>(<span class='st'>"year"</span>)<span class='op'>$</span><span class='fu'>getInfo</span>()
<span class='kw'>animation</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ee_utils_gif_annotate.html'>ee_utils_gif_annotate</a></span>(<span class='st'>"Ucayali, Peru"</span>) <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ee_utils_gif_annotate.html'>ee_utils_gif_annotate</a></span>(<span class='kw'>get_years</span>, size = <span class='fl'>15</span>, location = <span class='st'>"+90+40"</span>,
                        boxcolor = <span class='st'>"#FFFFFF"</span>) <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ee_utils_gif_annotate.html'>ee_utils_gif_annotate</a></span>(<span class='st'>"created using {magick} + {rgee}"</span>,
                        size = <span class='fl'>15</span>, font = <span class='st'>"sans"</span>,location = <span class='st'>"+70+20"</span>) <span class='op'>-&gt;</span>
  <span class='kw'>animation_wtxt</span>
<span class='kw'>animation_wtxt</span>
<span class='fu'><a href='ee_utils_gif_save.html'>ee_utils_gif_save</a></span>(<span class='kw'>animation_wtxt</span>, path = <span class='st'>"raster_as_ee.gif"</span>)
}
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


