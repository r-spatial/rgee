<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Move results from Google Drive to a local directory — ee_drive_to_local • rgee</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Move results from Google Drive to a local directory — ee_drive_to_local" />
<meta property="og:description" content="Move results of an EE task saved in Google Drive to a local directory." />
<meta property="og:image" content="http://csaybar.github.io/rgee/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/setup.html">Setup</a>
    </li>
    <li>
      <a href="../articles/considerations.html">Consideration</a>
    </li>
    <li>
      <a href="http://csaybar.github.io/rgee-examples/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/csaybar/rgee/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Move results from Google Drive to a local directory</h1>
    <small class="dont-index">Source: <a href='https://github.com/csaybar/rgee/blob/master/R/ee_download.R'><code>R/ee_download.R</code></a></small>
    <div class="hidden name"><code>ee_drive_to_local.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Move results of an EE task saved in Google Drive to a local directory.</p>
    </div>

    <pre class="usage"><span class='fu'>ee_drive_to_local</span>(
  <span class='no'>task</span>,
  <span class='no'>dsn</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>consider</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>(),
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>task</th>
      <td><p>List generated after finished correctly a EE task. See details.</p></td>
    </tr>
    <tr>
      <th>dsn</th>
      <td><p>Character. Output filename. If missing, a temporary
file will be assigned.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>A boolean argument which indicates indicating
whether "filename" should be overwritten. By default TRUE.</p></td>
    </tr>
    <tr>
      <th>consider</th>
      <td><p>Interactive. See details.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>logical. Suppress info message</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>filename character vector.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The task argument needs a status as task "COMPLETED" to work, since the
parameters necessary to identify EE objects into google drive are obtained
from ee$batch$Export$*$toDrive(...)$start()$status().</p>
<p><code>consider</code> argument is necessary since Google Drive permits users to
create files with the same name. <code>consider</code> uses an interactive R
session by default to help users identify just the files that they want to
download. Additionally, the options "last" and "all" are implemented. "last"
will download just the last file saved in Google Drive while with "all" all
files will be downloaded.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>rgee</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>stars</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>sf</span>)

<span class='fu'><a href='ee_users.html'>ee_users</a></span>()
<span class='fu'><a href='ee_reattach.html'>ee_reattach</a></span>() <span class='co'># reattach ee as a reserved word</span>
<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span>(<span class='kw'>drive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Define study area (local -&gt; earth engine)</span>
<span class='co'># Communal Reserve Amarakaeri - Peru</span>
<span class='no'>rlist</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>xmin</span> <span class='kw'>=</span> -<span class='fl'>71.13</span>, <span class='kw'>xmax</span> <span class='kw'>=</span> -<span class='fl'>70.95</span>,<span class='kw'>ymin</span> <span class='kw'>=</span> -<span class='fl'>12.89</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> -<span class='fl'>12.73</span>)
<span class='no'>ROI</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>rlist</span>$<span class='no'>xmin</span>, <span class='no'>rlist</span>$<span class='no'>ymin</span>,
         <span class='no'>rlist</span>$<span class='no'>xmax</span>, <span class='no'>rlist</span>$<span class='no'>ymin</span>,
         <span class='no'>rlist</span>$<span class='no'>xmax</span>, <span class='no'>rlist</span>$<span class='no'>ymax</span>,
         <span class='no'>rlist</span>$<span class='no'>xmin</span>, <span class='no'>rlist</span>$<span class='no'>ymax</span>,
         <span class='no'>rlist</span>$<span class='no'>xmin</span>, <span class='no'>rlist</span>$<span class='no'>ymin</span>)

<span class='no'>ee_ROI</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='no'>ROI</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>byrow</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/sf/man/st.html'>st_polygon</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/sf/man/sfc.html'>st_sfc</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/sf/man/st_crs.html'>st_set_crs</a></span>(<span class='fl'>4326</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='sf_as_ee.html'>sf_as_ee</a></span>()


<span class='co'># Get the mean annual NDVI for 2011</span>
<span class='no'>cloudMaskL457</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>image</span>) {
  <span class='no'>qa</span> <span class='kw'>&lt;-</span> <span class='no'>image</span>$<span class='fu'>select</span>(<span class='st'>"pixel_qa"</span>)
  <span class='no'>cloud</span> <span class='kw'>&lt;-</span> <span class='no'>qa</span>$<span class='fu'>bitwiseAnd</span>(<span class='fl'>32L</span>)$
    <span class='fu'>And</span>(<span class='no'>qa</span>$<span class='fu'>bitwiseAnd</span>(<span class='fl'>128L</span>))$
    <span class='fu'>Or</span>(<span class='no'>qa</span>$<span class='fu'>bitwiseAnd</span>(<span class='fl'>8L</span>))
  <span class='no'>mask2</span> <span class='kw'>&lt;-</span> <span class='no'>image</span>$<span class='fu'>mask</span>()$<span class='fu'>reduce</span>(<span class='no'>ee</span>$<span class='no'>Reducer</span>$<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>())
  <span class='no'>image</span> <span class='kw'>&lt;-</span> <span class='no'>image</span>$<span class='fu'>updateMask</span>(<span class='no'>cloud</span>$<span class='fu'>Not</span>())$<span class='fu'>updateMask</span>(<span class='no'>mask2</span>)
  <span class='no'>image</span>$<span class='fu'>normalizedDifference</span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='st'>"B4"</span>, <span class='st'>"B3"</span>))
}

<span class='no'>ic_l5</span> <span class='kw'>&lt;-</span> <span class='no'>ee</span>$<span class='fu'>ImageCollection</span>(<span class='st'>"LANDSAT/LT05/C01/T1_SR"</span>)$
  <span class='fu'>filterBounds</span>(<span class='no'>ee_ROI</span>)$
  <span class='fu'>filterDate</span>(<span class='st'>"2011-01-01"</span>, <span class='st'>"2011-12-31"</span>)$
  <span class='fu'>map</span>(<span class='no'>cloudMaskL457</span>)

<span class='co'># Create simple composite</span>
<span class='no'>mean_l5</span> <span class='kw'>&lt;-</span> <span class='no'>ic_l5</span>$<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>()$<span class='fu'>rename</span>(<span class='st'>"NDVI"</span>)
<span class='no'>mean_l5</span> <span class='kw'>&lt;-</span> <span class='no'>mean_l5</span>$<span class='fu'>reproject</span>(<span class='kw'>crs</span> <span class='kw'>=</span> <span class='st'>"EPSG:4326"</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>500</span>)
<span class='no'>mean_l5_Amarakaeri</span> <span class='kw'>&lt;-</span> <span class='no'>mean_l5</span>$<span class='fu'><a href='https://rdrr.io/r/graphics/clip.html'>clip</a></span>(<span class='no'>ee_ROI</span>)

<span class='co'># Move results from Earth Engine to Drive</span>
<span class='no'>task_img</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ee_image_to_drive.html'>ee_image_to_drive</a></span>(
  <span class='kw'>image</span> <span class='kw'>=</span> <span class='no'>mean_l5_Amarakaeri</span>,
  <span class='kw'>folder</span> <span class='kw'>=</span> <span class='st'>"Amarakaeri"</span>,
  <span class='kw'>fileFormat</span> <span class='kw'>=</span> <span class='st'>"GEO_TIFF"</span>,
  <span class='kw'>region</span> <span class='kw'>=</span> <span class='no'>ee_ROI</span>$<span class='fu'>geometry</span>(),
  <span class='kw'>fileNamePrefix</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='st'>"my_image"</span>, <span class='fu'><a href='https://rdrr.io/r/base/Sys.time.html'>Sys.time</a></span>())
)

<span class='no'>task_img</span>$<span class='fu'><a href='https://rdrr.io/r/stats/start.html'>start</a></span>()
<span class='fu'><a href='ee_monitoring.html'>ee_monitoring</a></span>(<span class='no'>task_img</span>)

<span class='co'># Move results from Drive to local</span>
<span class='no'>img</span> <span class='kw'>&lt;-</span> <span class='fu'>ee_drive_to_local</span>(<span class='kw'>task</span> <span class='kw'>=</span> <span class='no'>task_img</span>)
}</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


