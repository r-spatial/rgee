<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Move results from Google Drive to a local directory — ee_drive_to_local • rgee</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Move results from Google Drive to a local directory — ee_drive_to_local"><meta property="og:description" content="Move results of an EE task saved in Google Drive to a local directory."><meta property="og:image" content="https://r-spatial.github.io/rgee/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>

    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/rgee01.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/rgee02.html">Consideration</a>
    </li>
    <li>
      <a href="../articles/rgee03.html">Best Practices</a>
    </li>
    <li>
      <a href="../articles/rgee04.html">Shiny apps deployment</a>
    </li>
    <li>
      <a href="../articles/rgee05.html">rgee and GCS sync</a>
    </li>
    <li>
      <a href="../articles/rgee06.html">Integrate Rmarkdown and rgee</a>
    </li>
    <li>
      <a href="https://r-earthengine.github.io/" class="external-link">rgee examples</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>

    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>

    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/" class="external-link">
    <span class="fa fa-github fa-lg"></span>

    github
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Move results from Google Drive to a local directory</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-spatial/rgee/blob/master/R/ee_download.R" class="external-link"><code>R/ee_download.R</code></a></small>
    <div class="hidden name"><code>ee_drive_to_local.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Move results of an EE task saved in Google Drive to a local directory.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ee_drive_to_local</span><span class="op">(</span></span>
<span>  <span class="va">task</span>,</span>
<span>  <span class="va">dsn</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  consider <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  public <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  metadata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-task">task<a class="anchor" aria-label="anchor" href="#arg-task"></a></dt>
<dd><p>A generated list obtained after completing an Earth Engine task. See details.</p></dd>


<dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>Character. Output filename. If missing, a temporary
file will be assigned.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>A boolean argument that indicates
whether filename should be overwritten. By default TRUE.</p></dd>


<dt id="arg-consider">consider<a class="anchor" aria-label="anchor" href="#arg-consider"></a></dt>
<dd><p>Interactive. See details.</p></dd>


<dt id="arg-public">public<a class="anchor" aria-label="anchor" href="#arg-public"></a></dt>
<dd><p>Logical. If TRUE, a public link to the Google Drive resource is
created.</p></dd>


<dt id="arg-metadata">metadata<a class="anchor" aria-label="anchor" href="#arg-metadata"></a></dt>
<dd><p>Logical. If TRUE, the metadata related to the Google
Drive resource will be exported. See details.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. Suppress info message.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>If <code>metadata</code> is FALSE, will return the filename of the Google
Drive resource on their system. Otherwise, a list with two elements
(<code>dns</code> and <code>metadata</code>) is returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The task argument requires a status of "COMPLETED" because
the parameters required to identify EE items in Google Drive
are retrieved from  <br><code>ee$batch$Export$*$toDrive(...)$start()$status()</code>.</p>
<p>Due to the fact that Google Drive allows users to create files with the
same name, the <code>consider</code> argument is required. It use an interactive
R session by default to assist users in identifying the specific files
they wish to download. Additionally, "last" and "all" settings are
provided. "last" will only download the most recently saved file in
Google Drive, whereas "all" will download all files with the same name.</p>
<p>Finally, if the argument <code>metadata</code> is TRUE, a list containing the
following elements is exported and appended to the output filename (dsn):</p>
<ul><li><p><b>ee_id: </b>Name of the Earth Engine task.</p></li>
<li><p><b>drive_name: </b>Name of the Table in Google Drive.</p></li>
<li><p><b>drive_id: </b>Id of the Table in Google Drive.</p></li>
<li><p><b>drive_download_link: </b>Download link to the table.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other generic download functions:
<code><a href="ee_gcs_to_local.html">ee_gcs_to_local</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/stars/" class="external-link">stars</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="ee_users.html">ee_users</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span>drive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define study area (local -&gt; earth engine)</span></span></span>
<span class="r-in"><span><span class="co"># Communal Reserve Amarakaeri - Peru</span></span></span>
<span class="r-in"><span><span class="va">rlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">-</span><span class="fl">71.13</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">70.95</span>,ymin <span class="op">=</span> <span class="op">-</span><span class="fl">12.89</span>, ymax <span class="op">=</span> <span class="op">-</span><span class="fl">12.73</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ROI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">rlist</span><span class="op">$</span><span class="va">xmin</span>, <span class="va">rlist</span><span class="op">$</span><span class="va">ymin</span>,</span></span>
<span class="r-in"><span>         <span class="va">rlist</span><span class="op">$</span><span class="va">xmax</span>, <span class="va">rlist</span><span class="op">$</span><span class="va">ymin</span>,</span></span>
<span class="r-in"><span>         <span class="va">rlist</span><span class="op">$</span><span class="va">xmax</span>, <span class="va">rlist</span><span class="op">$</span><span class="va">ymax</span>,</span></span>
<span class="r-in"><span>         <span class="va">rlist</span><span class="op">$</span><span class="va">xmin</span>, <span class="va">rlist</span><span class="op">$</span><span class="va">ymax</span>,</span></span>
<span class="r-in"><span>         <span class="va">rlist</span><span class="op">$</span><span class="va">xmin</span>, <span class="va">rlist</span><span class="op">$</span><span class="va">ymin</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ee_ROI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">ROI</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_set_crs</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="sf_as_ee.html">sf_as_ee</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the mean annual NDVI for 2011</span></span></span>
<span class="r-in"><span><span class="va">cloudMaskL457</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">image</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">qa</span> <span class="op">&lt;-</span> <span class="va">image</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="st">"pixel_qa"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">cloud</span> <span class="op">&lt;-</span> <span class="va">qa</span><span class="op">$</span><span class="fu">bitwiseAnd</span><span class="op">(</span><span class="fl">32L</span><span class="op">)</span><span class="op">$</span></span></span>
<span class="r-in"><span>    <span class="fu">And</span><span class="op">(</span><span class="va">qa</span><span class="op">$</span><span class="fu">bitwiseAnd</span><span class="op">(</span><span class="fl">128L</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span></span>
<span class="r-in"><span>    <span class="fu">Or</span><span class="op">(</span><span class="va">qa</span><span class="op">$</span><span class="fu">bitwiseAnd</span><span class="op">(</span><span class="fl">8L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mask2</span> <span class="op">&lt;-</span> <span class="va">image</span><span class="op">$</span><span class="fu">mask</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">reduce</span><span class="op">(</span><span class="va">ee</span><span class="op">$</span><span class="va">Reducer</span><span class="op">$</span><span class="fu">min</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">image</span> <span class="op">&lt;-</span> <span class="va">image</span><span class="op">$</span><span class="fu">updateMask</span><span class="op">(</span><span class="va">cloud</span><span class="op">$</span><span class="fu">Not</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">updateMask</span><span class="op">(</span><span class="va">mask2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">image</span><span class="op">$</span><span class="fu">normalizedDifference</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"B4"</span>, <span class="st">"B3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ic_l5</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">ImageCollection</span><span class="op">(</span><span class="st">"LANDSAT/LT05/C01/T1_SR"</span><span class="op">)</span><span class="op">$</span></span></span>
<span class="r-in"><span>  <span class="fu">filterBounds</span><span class="op">(</span><span class="va">ee</span><span class="op">$</span><span class="fu">FeatureCollection</span><span class="op">(</span><span class="va">ee_ROI</span><span class="op">)</span><span class="op">)</span><span class="op">$</span></span></span>
<span class="r-in"><span>  <span class="fu">filterDate</span><span class="op">(</span><span class="st">"2011-01-01"</span>, <span class="st">"2011-12-31"</span><span class="op">)</span><span class="op">$</span></span></span>
<span class="r-in"><span>  <span class="fu">map</span><span class="op">(</span><span class="va">cloudMaskL457</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create simple composite</span></span></span>
<span class="r-in"><span><span class="va">mean_l5</span> <span class="op">&lt;-</span> <span class="va">ic_l5</span><span class="op">$</span><span class="fu">mean</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">rename</span><span class="op">(</span><span class="st">"NDVI"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mean_l5</span> <span class="op">&lt;-</span> <span class="va">mean_l5</span><span class="op">$</span><span class="fu">reproject</span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"EPSG:4326"</span>, scale <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mean_l5_Amarakaeri</span> <span class="op">&lt;-</span> <span class="va">mean_l5</span><span class="op">$</span><span class="fu">clip</span><span class="op">(</span><span class="va">ee_ROI</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Move results from Earth Engine to Drive</span></span></span>
<span class="r-in"><span><span class="va">task_img</span> <span class="op">&lt;-</span> <span class="fu"><a href="ee_image_to_drive.html">ee_image_to_drive</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  image <span class="op">=</span> <span class="va">mean_l5_Amarakaeri</span>,</span></span>
<span class="r-in"><span>  folder <span class="op">=</span> <span class="st">"Amarakaeri"</span>,</span></span>
<span class="r-in"><span>  fileFormat <span class="op">=</span> <span class="st">"GEO_TIFF"</span>,</span></span>
<span class="r-in"><span>  region <span class="op">=</span> <span class="va">ee_ROI</span>,</span></span>
<span class="r-in"><span>  fileNamePrefix <span class="op">=</span> <span class="st">"my_image_demo"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">task_img</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ee_monitoring.html">ee_monitoring</a></span><span class="op">(</span><span class="va">task_img</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Move results from Drive to local</span></span></span>
<span class="r-in"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu">ee_drive_to_local</span><span class="op">(</span>task <span class="op">=</span> <span class="va">task_img</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

